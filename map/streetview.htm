<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Streetview</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="icon" type="image/ico" href="favicon.ico">
<style>
html {
	height: 100%;
	width: 100%;
}
body {
	height: 100%;
	width: 100%;
	margin: 0;
	padding: 0;
	background-color: #2a2a2a;
}
#pano {
	position:absolute;
	width: 100%;
	height: 100%;
}
#pano .gmnoprint:first-child,
#pano .gmnoprint:nth-child(4)
{
	display: none !important;
}
.gm-bundled-control-on-bottom,
.gm-style-cc:nth-child(5),
img[alt="Google"]
{
	display: none !important;
}
.gmnoprint button {
	height: 20px !important;
	font-size: 12px !important;
}
.gmnoprint li {
	padding: 2px 5px !important;
	font-size: 12px !important;
}
div.gm-style-cc {
	line-height: 17px !important;
}
#map .gm-style-cc {
	display: none;
}
/* disable pegman dragging */
div[title] {
	pointer-events: none !important;
}
</style>
</head>
<body>
<div id="pano"></div>
<script>
const panoDiv = document.getElementById('pano');

let map, panorama, streetViewService, last_pos,
	is_snapped = false,
	is_initialized = false,
	init_task;

function init()
{
	panorama = new google.maps.StreetViewPanorama(panoDiv, {
		addressControl: false,
		fullscreenControl: false,
		imageDateControl : true, // show date of images
		linksControl: false, // < > arrows  on top of pano image
		showRoadLabels: false, //street name overlays on top of pano image
		zoomControl: false,
	});

	panorama.addListener('status_changed', function(evt){
		const status = this.getStatus();
		if (status == google.maps.StreetViewStatus.OK)
		{
			panorama.setVisible(true);
			last_pos = this.getPosition();
		}
		else
		{
			panorama.setPosition(last_pos);
			panorama.setVisible(true);
		}
	});

	is_initialized = true;
	if (init_task)
		init_task();
}

function gotoLatLng(lat, lng, pov)
{
	init_task = function() {
		const streetViewCoords = new google.maps.LatLng(lat, lng);
		panorama.setPosition(streetViewCoords);
		if (pov)
			panorama.setPov(pov);
	};
	if (is_initialized)
		init_task();
}

function getLatLng()
{
	return JSON.stringify({
		lat: panorama.location.latLng.lat(),
		lng: panorama.location.latLng.lng(),
		pov: panorama.pov
	});
}
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCt-iKtoOCPEyWa8pe0nMABxUXE7ofedvo&loading=async&callback=init"></script>
</body>
</html>

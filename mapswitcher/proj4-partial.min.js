!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):t.proj4=r()}(this,function(){"use strict";var t=1,r=2,e=3,a=4,n=5,i=484813681109536e-20,s=Math.PI/2,o=.16666666666666666,u=.04722222222222222,h=.022156084656084655,l=1e-10,f=.017453292519943295,d=57.29577951308232,c=Math.PI/4,m=2*Math.PI,p={},g={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},y=/[\s_\-\/\(\)]/g;function v(t,r){if(t[r])return t[r];for(var e,a=Object.keys(t),n=r.toLowerCase().replace(y,""),i=-1;++i<a.length;)if((e=a[i]).toLowerCase().replace(y,"")===n)return t[e]}var x=function(t){var r,e,a,n={},i=t.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,r){var e=r.split("=");return e.push(!0),t[e[0].toLowerCase()]=e[1],t},{}),s={proj:"projName",datum:"datumCode",rf:function(t){n.rf=parseFloat(t)},lat_0:function(t){n.lat0=t*f},lat_1:function(t){n.lat1=t*f},lat_2:function(t){n.lat2=t*f},lat_ts:function(t){n.lat_ts=t*f},lon_0:function(t){n.long0=t*f},lon_1:function(t){n.long1=t*f},lon_2:function(t){n.long2=t*f},alpha:function(t){n.alpha=parseFloat(t)*f},lonc:function(t){n.longc=t*f},x_0:function(t){n.x0=parseFloat(t)},y_0:function(t){n.y0=parseFloat(t)},k_0:function(t){n.k0=parseFloat(t)},k:function(t){n.k0=parseFloat(t)},a:function(t){n.a=parseFloat(t)},b:function(t){n.b=parseFloat(t)},r_a:function(){n.R_A=!0},zone:function(t){n.zone=parseInt(t,10)},south:function(){n.utmSouth=!0},towgs84:function(t){n.datum_params=t.split(",").map(function(t){return parseFloat(t)})},to_meter:function(t){n.to_meter=parseFloat(t)},units:function(t){n.units=t;var r=v(g,t);r&&(n.to_meter=r.to_meter)},from_greenwich:function(t){n.from_greenwich=t*f},pm:function(t){var r=v(p,t);n.from_greenwich=(r||parseFloat(t))*f},nadgrids:function(t){"@null"===t?n.datumCode="none":n.nadgrids=t},axis:function(t){3===t.length&&-1!=="ewnsud".indexOf(t.substr(0,1))&&-1!=="ewnsud".indexOf(t.substr(1,1))&&-1!=="ewnsud".indexOf(t.substr(2,1))&&(n.axis=t)},approx:function(){n.approx=!0}};for(r in i)e=i[r],r in s?"function"==typeof(a=s[r])?a(e):n[a]=e:n[r]=e;return"string"==typeof n.datumCode&&"WGS84"!==n.datumCode&&(n.datumCode=n.datumCode.toLowerCase()),n};function _(t){var r=this;if(2===arguments.length){var e=arguments[1];"string"==typeof e?"+"===e.charAt(0)?_[t]=x(arguments[1]):_[t]=wkt(arguments[1]):_[t]=e}else if(1===arguments.length){if(Array.isArray(t))return t.map(function(t){Array.isArray(t)?_.apply(r,t):_(t)});if("string"==typeof t){if(t in _)return _[t]}else"EPSG"in t?_["EPSG:"+t.EPSG]=t:"ESRI"in t?_["ESRI:"+t.ESRI]=t:"IAU2000"in t?_["IAU2000:"+t.IAU2000]=t:console.log(t);return}}function b(t){if(!function(t){return"string"==typeof t}(t))return t;if(function(t){return t in _}(t))return _[t];if(testWKT(t)){var r=wkt(t);if(checkMercator(r))return _["EPSG:3857"];var e=checkProjStr(r);return e?x(e):r}return function(t){return"+"===t[0]}(t)?x(t):void 0}!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t.WGS84=t["EPSG:4326"]}(_);var M=function(t,r){var e,a;if(t=t||{},!r)return t;for(a in r)void 0!==(e=r[a])&&(t[a]=e);return t},w=function(t,r,e){var a=t*r;return e/Math.sqrt(1-a*a)},N=function(t){return Math.abs(t)<=3.14159265359?t:t-function(t){return t<0?-1:1}(t)*m};function S(t){return t}var z=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=w(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var r,e,a=t.x,n=t.y;if(n*d>90&&n*d<-90&&a*d>180&&a*d<-180)return null;if(Math.abs(Math.abs(n)-s)<=l)return null;if(this.sphere)r=this.x0+this.a*this.k0*N(a-this.long0),e=this.y0+this.a*this.k0*Math.log(Math.tan(c+.5*n));else{var i=Math.sin(n),o=tsfnz(this.e,n,i);r=this.x0+this.a*this.k0*N(a-this.long0),e=this.y0-this.a*this.k0*Math.log(o)}return t.x=r,t.y=e,t},inverse:function(t){var r,e,a=t.x-this.x0,n=t.y-this.y0;if(this.sphere)e=s-2*Math.atan(Math.exp(-n/(this.a*this.k0)));else{var i=Math.exp(-n/(this.a*this.k0));if(-9999===(e=phi2z(this.e,i)))return null}return r=N(this.long0+a/(this.a*this.k0)),t.x=r,t.y=e,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:S,inverse:S,names:["longlat","identity"]}],k={},P=[];function G(t,r){var e=P.length;return t.names?(P[e]=t,t.names.forEach(function(t){k[t.toLowerCase()]=e}),this):(console.log(r),!0)}var j={start:function(){z.forEach(G)},add:G,get:function(t){if(!t)return!1;var r=t.toLowerCase();return void 0!==k[r]&&P[k[r]]?P[k[r]]:void 0}},I={},F=I.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};var C={};C.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};var A={};function E(t){if(0===t.length)return null;var r="@"===t[0];return r&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!r,grid:null,isNull:!0}:{name:t,mandatory:!r,grid:A[t]||null,isNull:!1}}function T(t){return t/3600*Math.PI/180}function L(t,r,e){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(r,e)))}function W(t){return t.map(function(t){return[T(t.longitudeShift),T(t.latitudeShift)]})}function U(s,f){if(!(this instanceof U))return new U(s);f=f||function(t){if(t)throw t};var d=b(s);if("object"==typeof d){var c=U.projections.get(d.projName);if(c){if(d.datumCode&&"none"!==d.datumCode){var m=v(C,d.datumCode);m&&(d.datum_params=m.towgs84?m.towgs84.split(","):null,d.ellps=m.ellipse,d.datumName=m.datumName?m.datumName:d.datumCode)}d.k0=d.k0||1,d.axis=d.axis||"enu",d.ellps=d.ellps||"wgs84";var p,g,y,x,_,w,N,S=function(t,r,e,a,n){if(!t){var i=v(I,a);i||(i=F),t=i.a,r=i.b,e=i.rf}return e&&!r&&(r=(1-1/e)*t),(0===e||Math.abs(t-r)<l)&&(n=!0,r=t),{a:t,b:r,rf:e,sphere:n}}(d.a,d.b,d.rf,d.ellps,d.sphere),z=(p=S.a,g=S.b,S.rf,y=d.R_A,w=((x=p*p)-(_=g*g))/x,N=0,y?(x=(p*=1-w*(o+w*(u+w*h)))*p,w=0):N=Math.sqrt(w),{es:w,e:N,ep2:(x-_)/_}),k=function(t){return void 0===t?null:t.split(",").map(E)}(d.nadgrids),P=d.datum||function(s,o,u,h,l,f,d){var c={};return c.datum_type=void 0===s||"none"===s?n:a,o&&(c.datum_params=o.map(parseFloat),0===c.datum_params[0]&&0===c.datum_params[1]&&0===c.datum_params[2]||(c.datum_type=t),c.datum_params.length>3&&(0===c.datum_params[3]&&0===c.datum_params[4]&&0===c.datum_params[5]&&0===c.datum_params[6]||(c.datum_type=r,c.datum_params[3]*=i,c.datum_params[4]*=i,c.datum_params[5]*=i,c.datum_params[6]=c.datum_params[6]/1e6+1))),d&&(c.datum_type=e,c.grids=d),c.a=u,c.b=h,c.es=l,c.ep2=f,c}(d.datumCode,d.datum_params,S.a,S.b,z.es,z.ep2,k);M(this,d),M(this,c),this.a=S.a,this.b=S.b,this.rf=S.rf,this.sphere=S.sphere,this.es=z.es,this.e=z.e,this.ep2=z.ep2,this.datum=P,this.init(),f(null,this)}else f(s)}else f(s)}function O(e){return e===t||e===r}U.projections=j,U.projections.start();var R=function(a,i,s){if(function(e,a){return e.datum_type===a.datum_type&&!(e.a!==a.a||Math.abs(e.es-a.es)>5e-11)&&(e.datum_type===t?e.datum_params[0]===a.datum_params[0]&&e.datum_params[1]===a.datum_params[1]&&e.datum_params[2]===a.datum_params[2]:e.datum_type!==r||e.datum_params[0]===a.datum_params[0]&&e.datum_params[1]===a.datum_params[1]&&e.datum_params[2]===a.datum_params[2]&&e.datum_params[3]===a.datum_params[3]&&e.datum_params[4]===a.datum_params[4]&&e.datum_params[5]===a.datum_params[5]&&e.datum_params[6]===a.datum_params[6])}(a,i))return s;if(a.datum_type===n||i.datum_type===n)return s;var o=a.a,u=a.es;if(a.datum_type===e){if(0!==q(a,!1,s))return;o=6378137,u=.0066943799901413165}var h=i.a,l=i.b,f=i.es;if(i.datum_type===e&&(h=6378137,l=6356752.314,f=.0066943799901413165),u===f&&o===h&&!O(a.datum_type)&&!O(i.datum_type))return s;if((s=geodeticToGeocentric(s,u,o),O(a.datum_type)&&(s=function(e,a,n){if(a===t)return{x:e.x+n[0],y:e.y+n[1],z:e.z+n[2]};if(a===r){var i=n[0],s=n[1],o=n[2],u=n[3],h=n[4],l=n[5],f=n[6];return{x:f*(e.x-l*e.y+h*e.z)+i,y:f*(l*e.x+e.y-u*e.z)+s,z:f*(-h*e.x+u*e.y+e.z)+o}}}(s,a.datum_type,a.datum_params)),O(i.datum_type)&&(s=function(e,a,n){if(a===t)return{x:e.x-n[0],y:e.y-n[1],z:e.z-n[2]};if(a===r){var i=n[0],s=n[1],o=n[2],u=n[3],h=n[4],l=n[5],f=n[6],d=(e.x-i)/f,c=(e.y-s)/f,m=(e.z-o)/f;return{x:d+l*c-h*m,y:-l*d+c+u*m,z:h*d-u*c+m}}}(s,i.datum_type,i.datum_params)),s=geocentricToGeodetic(s,f,h,l),i.datum_type===e)&&0!==q(i,!0,s))return;return s};function q(t,r,e){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;for(var a={x:-e.x,y:e.y},n={x:Number.NaN,y:Number.NaN},i=[],s=0;s<t.grids.length;s++){var o=t.grids[s];if(i.push(o.name),o.isNull){n=a;break}if(null!==o.grid){var u=o.grid.subgrids[0],h=(Math.abs(u.del[1])+Math.abs(u.del[0]))/1e4,l=u.ll[0]-h,f=u.ll[1]-h,c=u.ll[0]+(u.lim[0]-1)*u.del[0]+h,m=u.ll[1]+(u.lim[1]-1)*u.del[1]+h;if(!(f>a.y||l>a.x||m<a.y||c<a.x||(n=Q(a,r,u),isNaN(n.x))))break}else if(o.mandatory)return console.log("Unable to find mandatory grid '"+o.name+"'"),-1}return isNaN(n.x)?(console.log("Failed to find a grid shift table for location '"+-a.x*d+" "+a.y*d+" tried: '"+i+"'"),-1):(e.x=-n.x,e.y=n.y,0)}function Q(t,r,e){var a={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return a;var n={x:t.x,y:t.y};n.x-=e.ll[0],n.y-=e.ll[1],n.x=N(n.x-Math.PI)+Math.PI;var i=Z(n,e);if(r){if(isNaN(i.x))return a;i.x=n.x-i.x,i.y=n.y-i.y;var s,o,u=9;do{if(o=Z(i,e),isNaN(o.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.\tUsing first approximation.");break}s={x:n.x-(o.x+i.x),y:n.y-(o.y+i.y)},i.x+=s.x,i.y+=s.y}while(u--&&Math.abs(s.x)>1e-12&&Math.abs(s.y)>1e-12);if(u<0)return console.log("Inverse grid shift iterator failed to converge."),a;a.x=N(i.x+e.ll[0]),a.y=i.y+e.ll[1]}else isNaN(i.x)||(a.x=t.x+i.x,a.y=t.y+i.y);return a}function Z(t,r){var e,a={x:t.x/r.del[0],y:t.y/r.del[1]},n=Math.floor(a.x),i=Math.floor(a.y),s=a.x-1*n,o=a.y-1*i,u={x:Number.NaN,y:Number.NaN};if(n<0||n>=r.lim[0])return u;if(i<0||i>=r.lim[1])return u;e=i*r.lim[0]+n;var h=r.cvs[e][0],l=r.cvs[e][1];e++;var f=r.cvs[e][0],d=r.cvs[e][1];e+=r.lim[0];var c=r.cvs[e][0],m=r.cvs[e][1];e--;var p=r.cvs[e][0],g=r.cvs[e][1],y=s*o,v=s*(1-o),x=(1-s)*(1-o),_=(1-s)*o;return u.x=x*h+v*f+_*p+y*c,u.y=x*l+v*d+_*g+y*m,u}var D=function(t,r,e){var a,n,i,s=e.x,o=e.y,u=e.z||0,h={};for(i=0;i<3;i++)if(!r||2!==i||void 0!==e.z)switch(0===i?(a=s,n=-1!=="ew".indexOf(t.axis[i])?"x":"y"):1===i?(a=o,n=-1!=="ns".indexOf(t.axis[i])?"y":"x"):(a=u,n="z"),t.axis[i]){case"e":h[n]=a;break;case"w":h[n]=-a;break;case"n":h[n]=a;break;case"s":h[n]=-a;break;case"u":void 0!==e[n]&&(h.z=a);break;case"d":void 0!==e[n]&&(h.z=-a);break;default:return null}return h},K=function(t){var r={x:t[0],y:t[1]};return t.length>2&&(r.z=t[2]),t.length>3&&(r.m=t[3]),r},V=function(t){H(t.x),H(t.y)};function H(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function J(e,a,n){var i;if(Array.isArray(n)&&(n=K(n)),V(n),e.datum&&a.datum&&function(e,a){return(e.datum.datum_type===t||e.datum.datum_type===r)&&"WGS84"!==a.datumCode||(a.datum.datum_type===t||a.datum.datum_type===r)&&"WGS84"!==e.datumCode}(e,a)&&(n=J(e,i=new U("WGS84"),n),e=i),"enu"!==e.axis&&(n=D(e,!1,n)),"longlat"===e.projName)n={x:n.x*f,y:n.y*f,z:n.z||0};else if(e.to_meter&&(n={x:n.x*e.to_meter,y:n.y*e.to_meter,z:n.z||0}),!(n=e.inverse(n)))return;if(e.from_greenwich&&(n.x+=e.from_greenwich),n=R(e.datum,a.datum,n))return a.from_greenwich&&(n={x:n.x-a.from_greenwich,y:n.y,z:n.z||0}),"longlat"===a.projName?n={x:n.x*d,y:n.y*d,z:n.z||0}:(n=a.forward(n),a.to_meter&&(n={x:n.x/a.to_meter,y:n.y/a.to_meter,z:n.z||0})),"enu"!==a.axis?D(a,!0,n):n}var B=U("WGS84");function X(t,r,e){var a,n,i;return Array.isArray(e)?(a=J(t,r,e)||{x:NaN,y:NaN},e.length>2?void 0!==t.name&&"geocent"===t.name||void 0!==r.name&&"geocent"===r.name?"number"==typeof a.z?[a.x,a.y,a.z].concat(e.splice(3)):[a.x,a.y,e[2]].concat(e.splice(3)):[a.x,a.y].concat(e.splice(2)):[a.x,a.y]):(n=J(t,r,e),2===(i=Object.keys(e)).length?n:(i.forEach(function(a){if(void 0!==t.name&&"geocent"===t.name||void 0!==r.name&&"geocent"===r.name){if("x"===a||"y"===a||"z"===a)return}else if("x"===a||"y"===a)return;n[a]=e[a]}),n))}function Y(t){return t instanceof U?t:t.oProj?t.oProj:U(t)}function $(t,r,e){t=Y(t);var a,n=!1;return void 0===r?(r=t,t=B,n=!0):(void 0!==r.x||Array.isArray(r))&&(e=r,r=t,t=B,n=!0),r=Y(r),e?X(t,r,e):(a={forward:function(e){return X(t,r,e)},inverse:function(e){return X(r,t,e)}},n&&(a.oProj=r),a)}var tt={forward:rt,inverse:function(t){var r=UTMtoLL(decode(t.toUpperCase()));if(r.lat&&r.lon)return[r.lon,r.lat,r.lon,r.lat];return[r.left,r.bottom,r.right,r.top]},toPoint:et};function rt(t,r){return r=r||5,encode(LLtoUTM({lat:t[1],lon:t[0]}),r)}function et(t){var r=UTMtoLL(decode(t.toUpperCase()));return r.lat&&r.lon?[r.lon,r.lat]:[(r.left+r.right)/2,(r.top+r.bottom)/2]}function at(t,r,e){if(!(this instanceof at))return new at(t,r,e);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===r){var a=t.split(",");this.x=parseFloat(a[0],10),this.y=parseFloat(a[1],10),this.z=parseFloat(a[2],10)||0}else this.x=t,this.y=r,this.z=e||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}at.fromMGRS=function(t){return new at(et(t))},at.prototype.toMGRS=function(t){return rt([this.x,this.y],t)};var nt=function(t){var r=Math.exp(t);return r=(r-1/r)/2},it=function(t,r){t=Math.abs(t),r=Math.abs(r);var e=Math.max(t,r),a=Math.min(t,r)/(e||1);return e*Math.sqrt(1+Math.pow(a,2))},st=function(t){var r=Math.abs(t);return r=function(t){var r=1+t,e=r-1;return 0===e?t:t*Math.log(r)/e}(r*(1+r/(it(1,r)+1))),t<0?-r:r},ot=function(t,r){for(var e,a=2*Math.cos(2*r),n=t.length-1,i=t[n],s=0;--n>=0;)e=a*i-s+t[n],s=i,i=e;return r+e*Math.sin(2*r)},ut=function(t,r){for(var e,a=2*Math.cos(r),n=t.length-1,i=t[n],s=0;--n>=0;)e=a*i-s+t[n],s=i,i=e;return Math.sin(r)*e},ht=function(t,r,e){for(var a,n,i=Math.sin(r),s=Math.cos(r),o=nt(e),u=function(t){var r=Math.exp(t);return r=(r+1/r)/2}(e),h=2*s*u,l=-2*i*o,f=t.length-1,d=t[f],c=0,m=0,p=0;--f>=0;)a=m,n=c,d=h*(m=d)-a-l*(c=p)+t[f],p=l*m-n+h*c;return[(h=i*u)*d-(l=s*o)*p,h*p+l*d]};var lt={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(tmerc.init.apply(this),this.forward=tmerc.forward,this.inverse=tmerc.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),r=t/(2-t),e=r;this.cgb[0]=r*(2+r*(-2/3+r*(r*(116/45+r*(26/45+r*(-2854/675)))-2))),this.cbg[0]=r*(r*(2/3+r*(4/3+r*(-82/45+r*(32/45+r*(4642/4725)))))-2),e*=r,this.cgb[1]=e*(7/3+r*(r*(-227/45+r*(2704/315+r*(2323/945)))-1.6)),this.cbg[1]=e*(5/3+r*(-16/15+r*(-13/9+r*(904/315+r*(-1522/945))))),e*=r,this.cgb[2]=e*(56/15+r*(-136/35+r*(-1262/105+r*(73814/2835)))),this.cbg[2]=e*(-26/15+r*(34/21+r*(1.6+r*(-12686/2835)))),e*=r,this.cgb[3]=e*(4279/630+r*(-332/35+r*(-399572/14175))),this.cbg[3]=e*(1237/630+r*(r*(-24832/14175)-2.4)),e*=r,this.cgb[4]=e*(4174/315+r*(-144838/6237)),this.cbg[4]=e*(-734/315+r*(109598/31185)),e*=r,this.cgb[5]=e*(601676/22275),this.cbg[5]=e*(444337/155925),e=Math.pow(r,2),this.Qn=this.k0/(1+r)*(1+e*(.25+e*(1/64+e/256))),this.utg[0]=r*(r*(2/3+r*(-37/96+r*(1/360+r*(81/512+r*(-96199/604800)))))-.5),this.gtu[0]=r*(.5+r*(-2/3+r*(5/16+r*(41/180+r*(-127/288+r*(7891/37800)))))),this.utg[1]=e*(-1/48+r*(-1/15+r*(437/1440+r*(-46/105+r*(1118711/3870720))))),this.gtu[1]=e*(13/48+r*(r*(557/1440+r*(281/630+r*(-1983433/1935360)))-.6)),e*=r,this.utg[2]=e*(-17/480+r*(37/840+r*(209/4480+r*(-5569/90720)))),this.gtu[2]=e*(61/240+r*(-103/140+r*(15061/26880+r*(167603/181440)))),e*=r,this.utg[3]=e*(-4397/161280+r*(11/504+r*(830251/7257600))),this.gtu[3]=e*(49561/161280+r*(-179/168+r*(6601661/7257600))),e*=r,this.utg[4]=e*(-4583/161280+r*(108847/3991680)),this.gtu[4]=e*(34729/80640+r*(-3418889/1995840)),e*=r,this.utg[5]=-.03233083094085698*e,this.gtu[5]=.6650675310896665*e;var a=ot(this.cbg,this.lat0);this.Zb=-this.Qn*(a+ut(this.gtu,2*a))},forward:function(t){var r=N(t.x-this.long0),e=t.y;e=ot(this.cbg,e);var a=Math.sin(e),n=Math.cos(e),i=Math.sin(r),s=Math.cos(r);e=Math.atan2(a,s*n),r=Math.atan2(i*n,it(a,n*s)),r=st(Math.tan(r));var o,u,h=ht(this.gtu,2*e,2*r);return e+=h[0],r+=h[1],Math.abs(r)<=2.623395162778?(o=this.a*(this.Qn*r)+this.x0,u=this.a*(this.Qn*e+this.Zb)+this.y0):(o=1/0,u=1/0),t.x=o,t.y=u,t},inverse:function(t){var r,e,a=(t.x-this.x0)*(1/this.a),n=(t.y-this.y0)*(1/this.a);if(n=(n-this.Zb)/this.Qn,a/=this.Qn,Math.abs(a)<=2.623395162778){var i=ht(this.utg,2*n,2*a);n+=i[0],a+=i[1],a=Math.atan(nt(a));var s=Math.sin(n),o=Math.cos(n),u=Math.sin(a),h=Math.cos(a);n=Math.atan2(s*h,it(u,h*o)),a=Math.atan2(u,h*o),r=N(a+this.long0),e=ot(this.cgb,n)}else r=1/0,e=1/0;return t.x=r,t.y=e,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]},ft=function(t,r){if(void 0===t){if((t=Math.floor(30*(N(r)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t};var dt={init:function(){var t=ft(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*f,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,lt.init.apply(this),this.forward=lt.forward,this.inverse=lt.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};return $.defaultDatum="WGS84",$.Proj=U,$.WGS84=new $.Proj("WGS84"),$.Point=at,$.toPoint=K,$.defs=_,$.nadgrid=function(t,r){var e=new DataView(r),a=function(t){var r=t.getInt32(8,!1);return 11!==r&&(11!==(r=t.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}(e),n=function(t,r){return{nFields:t.getInt32(8,r),nSubgridFields:t.getInt32(24,r),nSubgrids:t.getInt32(40,r),shiftType:L(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,r),fromSemiMinorAxis:t.getFloat64(136,r),toSemiMajorAxis:t.getFloat64(152,r),toSemiMinorAxis:t.getFloat64(168,r)}}(e,a);n.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var i={header:n,subgrids:function(t,r,e){for(var a=[],n=0;n<r.nSubgrids;n++){var i=readGridHeader(t,176,e),s=readGridNodes(t,176,i,e),o=Math.round(1+(i.upperLongitude-i.lowerLongitude)/i.longitudeInterval),u=Math.round(1+(i.upperLatitude-i.lowerLatitude)/i.latitudeInterval);a.push({ll:[T(i.lowerLongitude),T(i.lowerLatitude)],del:[T(i.longitudeInterval),T(i.latitudeInterval)],lim:[o,u],count:i.gridNodeCount,cvs:W(s)})}return a}(e,n,a)};return A[t]=i,i},$.transform=J,$.mgrs=tt,$.version="2.7.0",$.Proj.projections.add(dt),$});